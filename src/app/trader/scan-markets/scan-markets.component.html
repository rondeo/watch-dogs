<div>
    <div>
        <small>{{exchange}}</small>
        <mat-spinner *ngIf="scanner.isScanning" [diameter]="24" class="mat-progress-spinner"></mat-spinner>

        <mat-checkbox #favoritesCheck (change)="onFavoriteChange($event)">Favorite</mat-checkbox>
        <mat-checkbox #trendCheck >Trend</mat-checkbox>
        <mat-checkbox #volumeCheck (change)="onVolumeChange($event)">Volume</mat-checkbox>
        <mat-checkbox #followingCheck (change)="onFollowingChange($event)">Following</mat-checkbox>
        <mat-checkbox #botsCheck (change)="onBotsChange($event)">Bots</mat-checkbox>
        <mat-checkbox #patternCheck (change)="onPatternChange($event)">Pattern</mat-checkbox>
        <!--<button mat-button="" (click)="onClearMemoryClick()">Clear Memory</button>-->
    </div>

    <small (click)="onProgressClick()">{{scanner.currentMarket}} {{scanner.progressSub | async}}</small>

    <div *ngIf="patternCheck.checked">
        <h3>Pattern</h3>
        <mat-form-field class="w3">
            <input matInput placeholder="Volume"
                   [(ngModel)]="volumeDifference"
            >
        </mat-form-field>
        <mat-form-field class="w5">
            <mat-select [(ngModel)]="candlesInterval">
                <mat-option value="5m">5m</mat-option>
                <mat-option value="15m">15m</mat-option>
                <mat-option value="30m">30m</mat-option>
            </mat-select>
        </mat-form-field>
        <button mat-button="" (click)="onPatternStartClick()">
            {{scanner.isScanning?'Stop':'Scan'}}
        </button>

        <div class="scrollY300">
            <app-table-props [dataset]="patterns$ | async" (selected)="onPatternClick($event)"></app-table-props>
        </div>
    </div>


    <div *ngIf="botsCheck.checked">
        <h3>Bots</h3>
        <div class="scrollY300">
            <app-table-props [dataset]="bots" (selected)="onBotsClick($event)"></app-table-props>
        </div>
    </div>

    <div *ngIf="followingCheck.checked">
        <h3>Following</h3>
        <div class="scrollY300">
            <app-table-props [dataset]="following" (selected)="onFollowingClick($event)"></app-table-props>
        </div>
    </div>


    <div *ngIf="trendCheck.checked">
        <h3>Trend</h3>
        &nbsp;&nbsp;
        <mat-form-field class="w6">
            <mat-select [(ngModel)]="maX">
                <mat-option value="ma7_25">ma7_25</mat-option>
                <mat-option value="ma7_99">ma7_99</mat-option>
                <mat-option value="ma25_99">ma25_99</mat-option>
            </mat-select>
        </mat-form-field>
        &nbsp;&nbsp;
        <mat-form-field class="w3">
            <input matInput placeholder="Percent"
                   [(ngModel)]="percent"
            >
        </mat-form-field>
        &nbsp;&nbsp;
        <mat-form-field class="w5">
            <mat-select [(ngModel)]="candlesInterval">
                <mat-option value="5m">5m</mat-option>
                <mat-option value="15m">15m</mat-option>
                <mat-option value="1h">1h</mat-option>
                <mat-option value="1d">1D</mat-option>
            </mat-select>
        </mat-form-field>
        &nbsp;&nbsp;
        <button mat-button="" (click)="onScanStart()">{{scanner.isScanning?'Stop':'Start'}}</button>

        <div class="scrollY300">
            <app-table-props [dataset]="dataset$ | async" (selected)="onMarketClick($event)"></app-table-props>
        </div>
    </div>

    <div *ngIf="favoritesCheck.checked">
        <h4>Favorites</h4>
        <div class="scrollY300">
            <app-table-props [dataset]="dataset$ | async" (selected)="onFavoritesClick($event)"></app-table-props>
        </div>
    </div>



    <div *ngIf="volumeCheck.checked">
        <h4>Volume</h4>
        <mat-form-field class="w3">
            <input matInput placeholder="Volume"
                   [(ngModel)]="volumeDifference"
            >
        </mat-form-field>
        <mat-form-field class="w5">
            <mat-select [(ngModel)]="candlesInterval">
                <mat-option value="5m">5m</mat-option>
                <mat-option value="15m">15m</mat-option>
                <mat-option value="30m">30m</mat-option>
                <mat-option value="1h">1h</mat-option>
                <mat-option value="6h">6h</mat-option>
            </mat-select>
        </mat-form-field>
        <button mat-button="" (click)="onVolumeStartClick()">
            {{scanner.isScanning?'Stop':'Scan'}}
        </button>

        <div class="scrollY300">
            <app-table-props [dataset]="volumesResults$ | async" (selected)="onVolumeClick($event)"></app-table-props>
        </div>

    </div>

   <app-media [coin]="coin"></app-media>
    <br/>

    <a class="btn" routerLink="/my-exchange/buy-sell/{{exchange}}/{{selectedMarket}}">{{exchange}}
        {{selectedMarket}}</a>
    &nbsp;&nbsp;
    <span class="fa fa-star fa-2x dgreen" (click)="onStarClick()"></span>
    &nbsp;&nbsp;
    <a class="fa fa-anchor fa-2x dgreen"  routerLink="/trader/follow-market/{{userMarket}}"></a>
    &nbsp;&nbsp;
    <!-- <span class="fa fa-plus fa-2x dgreen" (click)="onAddBotClick()"></span>-->

    <mat-form-field class="w6">
        <input matInput placeholder="Market"
               [(ngModel)]="userMarket"
               (keyup)="onMarketInput($event)"
        >
    </mat-form-field>
    <mat-form-field class="w3">
        <mat-select [(ngModel)]="candlesInterval" (selectionChange)="onCandlesIntrvalChange()">
            <mat-option value="5m">5m</mat-option>
            <mat-option value="15m">15m</mat-option>
            <mat-option value="1h">1h</mat-option>
            <mat-option value="6h">6h</mat-option>
        </mat-select>
    </mat-form-field>

    <mat-checkbox [(ngModel)]="inBrowser">Browser</mat-checkbox>
    <app-mc-data [coin]="selectedMarket?selectedMarket.split('_')[1]:null"></app-mc-data>
    <app-candlesticks [candles]="candles"></app-candlesticks>
    <app-volume-hist [values]="volumes"></app-volume-hist>
   <!-- <app-macd-indicator [candles]="candles"></app-macd-indicator>
    <app-mfi-indicator [candles]="candles"></app-mfi-indicator>
    <app-vwmacd-indicator  [candles]="candles" ></app-vwmacd-indicator>-->

</div>
